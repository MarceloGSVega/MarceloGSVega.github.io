<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Relatório Laboratório 7 - Processamento de Vídeo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="bi bi-arrow-left"></i> Voltar
            </a>
        </div>
    </nav>

    <div class="container py-4">
        <header class="text-center mb-5">
            <h1 class="display-4">Relatório Laboratório 7</h1>
            <p class="lead text-muted">Processamento de Vídeo - Detecção com Haar Cascade</p>
        </header>

        <!-- Link para documento completo -->
        <div class="alert alert-primary mb-5" role="alert">
            <div class="d-flex align-items-center">
                <div class="flex-shrink-0">
                    <i class="bi bi-file-earmark-pdf fs-2 me-3"></i>
                </div>
                <div class="flex-grow-1">
                    <h4 class="alert-heading mb-2">Documento Completo</h4>
                    <p class="mb-0">
                        Acesse a versão completa deste relatório em PDF:
                        <a href="./imagens/Relatório Laboratório 7 - Processamento de Vídeo.pdf"
                           class="alert-link"
                           target="_blank"
                           rel="noopener noreferrer">
                            <i class="bi bi-box-arrow-up-right"></i> Abrir em PDF
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <!-- 1. Introdução -->
        <section class="mb-5">
            <h2 class="h3 mb-3">1. Introdução</h2>
            <div class="card">
                <div class="card-body">
                    <p>Este relatório documenta os procedimentos e resultados do Laboratório 7 da disciplina de Processamento de Vídeo, cujo objetivo principal foi implementar técnicas de detecção de objetos e rostos utilizando classificadores Haar Cascade disponíveis na biblioteca OpenCV.</p>
                    <p>O experimento abordou detecção de rostos e olhos primeiro em imagens estáticas previamente armazenadas e depois em tempo real via webcam. O documento serve como referência técnica para futuras implementações de manipulação de mídias e captura com filtragem baseada em cascatas.</p>
                </div>
            </div>
        </section>

        <!-- 2. Fundamentos Básicos -->
        <section class="mb-5">
            <h2 class="h3 mb-3">2. Fundamentos Básicos</h2>
            <div class="card">
                <div class="card-body">
                    <p>A detecção de objetos por meio de cascatas Haar baseia-se no uso de características visuais simples chamadas Haar-like features, que representam contrastes entre regiões claras e escuras da imagem. Essas características são extraídas rapidamente graças ao uso da imagem integral, uma técnica que permite calcular somas de pixels em regiões retangulares com poucas operações, tornando o método adequado para aplicações em tempo real.</p>
                    <p>Durante o processo de treinamento, utiliza-se o algoritmo AdaBoost para selecionar as características mais relevantes entre milhares de possibilidades e combinar diversos classificadores fracos em classificadores fortes. Esses classificadores são então organizados em uma estrutura em cascata, onde cada estágio avalia se uma região da imagem pode conter o objeto de interesse.</p>                     
                    <p>Bibliotecas como o OpenCV implementam essa técnica de forma otimizada, oferecendo modelos pré-treinados e ferramentas para aplicar a detecção de forma simples, normalmente por meio do carregamento de um classificador em formato XML e da utilização da função detectMultiScale()</p>                    
                    <pre class="bg-light p-3" style="font-size:.85em;">
face_cascade = cv2.CascadeClassifier('haarcascade_frontalface_alt.xml')
eyes_cascade = cv2.CascadeClassifier('haarcascade_eye_tree_eyeglasses.xml')

gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
faces = face_cascade.detectMultiScale(gray, scaleFactor=1.1, minNeighbors=5)
for (x,y,w,h) in faces:
    roi = gray[y:y+h, x:x+w]
    eyes = eyes_cascade.detectMultiScale(roi, 1.1, 5)
    # desenho dos retângulos
                    </pre>
                </div>
            </div>
        </section>

        <!-- 3. Materiais e Métodos -->
        <section class="mb-5">
            <h2 class="h3 mb-3">3. Materiais e Métodos</h2>
            <div class="card">
                <div class="card-body">
                    <h4 class="h5">3.1 Ambiente de Desenvolvimento</h4>
                    <div class="ambiente-dev">
                        <!-- 1. Ubuntu -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">1. Ubuntu (Linux OS)</h5>
                            <p><strong>O que é:</strong> Uma distribuição Linux de código aberto.</p>
                            <p><strong>Finalidade:</strong> Fornece o sistema operacional e o ambiente de desenvolvimento onde todas as ferramentas serão instaladas e executadas.</p>
                        </div>

                        <!-- 2. Terminal -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">2. Terminal (Linux Shell)</h5>
                            <p><strong>O que é:</strong> Interface de linha de comando (CLI).</p>
                            <p><strong>Finalidade:</strong> Utilizado para executar comandos do sistema, gerenciar ambientes, instalar softwares e rodar programas.</p>
                        </div>

                        <!-- 3. Conda/Miniconda3 -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">3. Conda / Miniconda3</h5>
                            <p><strong>O que é:</strong> Miniconda é um gerenciador de pacotes e ambientes leve para Python.</p>
                            <p><strong>Finalidade:</strong></p>
                            <ul>
                                <li>Gerenciar versões do Python e suas dependências.</li>
                                <li>Criar ambientes isolados (como o PV25) para evitar conflitos entre projetos.</li>
                            </ul>
                        </div>

                        <!-- 4. OpenCV -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">4. OpenCV</h5>
                            <p><strong>O que é:</strong> Biblioteca de Visão Computacional de Código Aberto.</p>
                            <p><strong>Finalidade:</strong> Principal biblioteca usada para tarefas de visão computacional e processamento de imagens/vídeos (detecção de objetos, transformações, extração de características etc.).</p>
                            <p><strong>Variantes:</strong></p>
                            <ul>
                                <li><strong>OpenCV (compilado do código-fonte):</strong> Instalação completa com suporte a C++ e Python.</li>
                                <li><strong>OpenCV-Contrib:</strong> Módulos extras desenvolvidos pela comunidade (ex.: reconhecimento facial, SIFT, SURF).</li>
                                <li><strong>opencv-python (pip):</strong> Pacote pré-compilado do OpenCV para Python.</li>
                                <li><strong>opencv-contrib-python (pip):</strong> Adiciona os módulos extras à instalação em Python.</li>
                            </ul>
                        </div>

                        <!-- 5. Ferramentas de Compilação -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">5. Ferramentas de Compilação e Dependências</h5>
                            <p>Essenciais para compilar e executar o OpenCV a partir do código-fonte:</p>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>build-essential:</strong> Compilador e ferramentas básicas de compilação.</li>
                                <li class="list-group-item"><strong>cmake:</strong> Configura e gera os arquivos de build do OpenCV.</li>
                                <li class="list-group-item"><strong>git:</strong> Usado para clonar os repositórios do OpenCV.</li>
                                <li class="list-group-item"><strong>pkg-config:</strong> Auxilia no gerenciamento de caminhos de bibliotecas e dependências.</li>
                                <li class="list-group-item"><strong>libgtk-3-dev:</strong> Suporte de interface gráfica para exibição de imagens.</li>
                                <li class="list-group-item"><strong>libavcodec-dev, libavformat-dev, libswscale-dev:</strong> Codecs de vídeo/áudio.</li>
                                <li class="list-group-item"><strong>libjpeg-dev, libpng-dev, libtiff-dev:</strong> Suporte a formatos de imagem.</li>
                                <li class="list-group-item"><strong>libxvidcore-dev, libx264-dev:</strong> Bibliotecas de codificação de vídeo.</li>
                                <li class="list-group-item"><strong>gfortran, libatlas-base-dev:</strong> Aceleração matemática.</li>
                                <li class="list-group-item"><strong>python3-dev, python3-numpy:</strong> Cabeçalhos Python + NumPy.</li>
                                <li class="list-group-item"><strong>libtbb-dev:</strong> Suporte a multithreading.</li>
                                <li class="list-group-item"><strong>libopenexr-dev:</strong> Suporte para imagens HDR.</li>
                                <li class="list-group-item"><strong>libv4l-dev, libdc1394-dev:</strong> Suporte a captura de vídeo.</li>
                                <li class="list-group-item"><strong>libgstreamer-dev:</strong> Suporte a streaming de vídeo.</li>
                            </ul>
                        </div>

                        <!-- 6. pkg-config -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">6. pkg-config</h5>
                            <p><strong>O que é:</strong> Ferramenta auxiliar para configurar flags de compilação e linkagem de bibliotecas.</p>
                            <p><strong>Finalidade:</strong> Verifica se o OpenCV está instalado e acessível (pkg-config --modversion opencv4).</p>
                        </div>

                        <!-- 7. Python -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">7. Python e C++</h5>
                            <p><strong>O que sao:</strong> Linguagens de programação usadas para rodar os scripts com OpenCV.</p>
                            <p><strong>Finalidade:</strong> Fornece o ambiente de programação para desenvolver tarefas de visão computacional.</p>
                        </div>

                        <!-- 8. VLC Media Player -->
                        <div class="tool-section mb-4">
                            <h5 class="h6 fw-bold">9. VLC Media Player</h5>
                            <p><strong>O que é:</strong> Reprodutor multimídia gratuito e de código aberto.</p>
                            <p><strong>Finalidade:</strong> Permite visualizar vídeos e imagens fora do OpenCV, útil para testes e validação de resultados do processamento de vídeo.</p>
                        </div>
                    </div>

                    <h4 class="h5 mt-4">3.2 Procedimento Experimental</h4>
                    <div class="mb-3">
                        <p>Referências consultadas: documentação oficial (<a href="https://docs.opencv.org/4.x/db/d28/tutorial_cascade_classifier.html" target="_blank" rel="noopener">tutorial cascade</a>) e repositório de modelos (<a href="https://github.com/opencv/opencv/tree/master/data/haarcascades" target="_blank" rel="noopener">haarcascades</a>).</p>
                        <p><strong>Primeira Parte:</strong> Carregamento de imagens dos membros da equipe e aplicação dos classificadores para detecção de rostos e olhos.</p>
                        <p><strong>Segunda Parte:</strong> Adaptação do código para captura via webcam, detecção em tempo real e salvamento de frame ao pressionar tecla.</p>
                        <p>Parâmetros calibrados: <code>scaleFactor</code>, <code>minNeighbors</code>, e verificação de retornos para robustez.</p>
                    </div>
                    <h4 class="h5 mt-4">3.3 Estrutura do Código</h4>
                    <ul>
                        <li>Carregamento dos cascades XML</li>
                        <li>Conversão BGR &rarr; GRAY</li>
                        <li><code>detectMultiScale</code> para rostos e subsequente para olhos na ROI</li>
                        <li>Desenho de retângulos e exibição</li>
                        <li>Captura condicional de imagem (ex.: tecla 's')</li>
                        <li>Liberação de recursos (<code>release()</code>)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 4. Resultados e Análises -->
        <section class="mb-5">
            <h2 class="h3 mb-3">4. Resultados e Análises</h2>
            <div class="card">
                <div class="card-body">
                    <h4 class="h5">4.1 Resultados Obtidos</h4>
                    <p>Na etapa de imagens estáticas, rostos foram detectados com alta taxa de acerto; pequenos ajustes de <code>minNeighbors</code> reduziram falsos positivos. Olhos foram identificados consistentemente em regiões bem iluminadas.</p>
                    <p>Na etapa em tempo real, a detecção manteve estabilidade em resolução padrão (640x480) com latência baixa. Variações bruscas de iluminação afetaram olhos mais que rostos.</p>
                    <h4 class="h5 mt-4">4.2 Análise</h4>
                    <ul>
                        <li>Ajuste de <code>scaleFactor</code> impacta sensibilidade vs. velocidade.</li>
                        <li><code>minNeighbors</code> mais alto reduz falsos positivos (especialmente olhos).</li>
                        <li>Conversão para escala de cinza é obrigatória para acelerar o matching das features.</li>
                        <li>Modelos pré-treinados evitam custo de treinamento próprio.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 5. Conclusões -->
        <section class="mb-5">
            <h2 class="h3 mb-3">5. Conclusões e Comentários Finais</h2>
            <div class="card">
                <div class="card-body">
                    <p>O laboratório demonstrou a viabilidade de Haar Cascade para detecção rápida de rostos e olhos em imagens e vídeo. A abordagem permanece útil em cenários de baixo recurso.</p>
                    <p>Lições: verificação de <code>ret</code>, calibração de parâmetros, tratamento de iluminação e liberação de recursos. A base construída permite extensão para detecção de outros objetos ou substituição futura por métodos baseados em CNN.</p>
                    <p>Aplicações futuras: autenticação básica, contagem de pessoas, apoio a pré-processamento em pipelines modernos.</p>
                </div>
            </div>
        </section>
    </div>

    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">© 2025 - Laboratório de Processamento de Vídeo</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
